if (self.CavalryLogger) { CavalryLogger.start_js(["\/jYBk"]); }

__d("OGHovercardLayerHideOnBlur",["ContextualThing","DOM","Event"],(function(a,b,c,d,e,f){__p&&__p();function a(a){this._layer=a}Object.assign(a.prototype,{_subscriptions:null,_clickListener:null,enable:function(){this._subscriptions=[this._layer.subscribe("show",this._attach.bind(this)),this._layer.subscribe("hide",this._detach.bind(this))],this._layer.isShown()&&this._attach()},disable:function(){this._detach();while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this._subscriptions=null},_detach:function(){this._clickListener&&this._clickListener.remove(),this._clickListener=null},_attach:function(){setTimeout(function(){this._clickListener=b("Event").listen(document.documentElement,"click",this._maybeHide.bind(this))}.bind(this),0)},_maybeHide:function(event){var a=event.getTarget();if(b("DOM").contains(this._layer.getContent(),a)||b("ContextualThing").containsIncludingLayers(this._layer.getContentRoot(),a))return;this._shouldHide(event)&&this._layer.hide()},_shouldHide:function(event){return!0}});e.exports=a}),null);
__d("OGAggregationHovercardTarget",["cx","fbt","ArbiterMixin","AsyncRequest","ContextualDialog","ContextualDialogArrow","CSS","DOM","Event","LayerHideOnBlur","LayerHideOnEscape","OGHovercardLayerHideOnBlur"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=350,j={};function k(a){return new(b("ContextualDialog"))({addedBehaviors:[b("LayerHideOnBlur"),b("LayerHideOnEscape")],arrowBehavior:b("ContextualDialogArrow"),classNames:[a]},b("DOM").create("div",{className:"_4q1"},h._("Loading..."))).setWidth(i)}Object.assign(a,{setHovercard:function(a,b){a=j[a];a&&a.setHovercard(b)}});function a(a,b,c,d,e,f,g,h,i){__p&&__p();j[b]=this;this._targetID=b;this._endpoint=c;this._preventClose=e||[];this._position=g||"below";this._dialogClass=h||"";this._fetchOnHover=i;this.init(a);for(var b=0,c=d.length;b<c;b++){e=d[b];this.addTrigger(e.element,e.trigger_class,e.context)}f&&this.showHovercard(null,null)}Object.assign(a.prototype,b("ArbiterMixin"),{init:function(a){__p&&__p();this._hovercardShown=!1;this._hovercardScheduled=!1;this._target=a;this._triggers=[];this._hovercard=null;this._fetching=!1;this._placeholder=null;this._placeholderListener=null;this._shownClass="hover_shown";this._triggerClass=null;this._currentTrigger=null;this._context=null;return this},addTrigger:function(a,c,d){this._triggers.push(a),b("Event").listen(a,"click",this._onTriggerClick.bind(this,a,c,d)),this._fetchOnHover&&b("Event").listen(a,"mouseover",this._onTriggerMouseOver.bind(this))},_onTriggerMouseOver:function(){this._fetch()},_onTriggerClick:function(a,b,c){c=c||this._target;if(this._hovercardShown&&this._hovercard.getContext()===c||this._hovercardScheduled&&this._placeholder.getContext()===c||(this._hovercardShown||this._hovercardScheduled)&&this._currentTrigger===a){this._currentTrigger=null;this.hideHovercard();return}this.hideHovercard();this._currentTrigger=a;this.showHovercard(b,c)},_fetch:function(){if(this._hovercard!=null||this._fetching)return;this._fetching=!0;var a=function(){this._fetching=!1},c=function(){this.hideHovercard()};new(b("AsyncRequest"))(this._endpoint).setData({hover_target:this._targetID}).setMethod("GET").setReadOnly(!0).setErrorHandler(c.bind(this)).setTransportErrorHandler(c.bind(this)).setFinallyHandler(a.bind(this)).send()},setHovercard:function(a){__p&&__p();var c,d=this;this._hovercard=a;c=babelHelpers.inherits(e,b("OGHovercardLayerHideOnBlur"));c&&c.prototype;e.prototype.$conditionalHideOnBlur1=function(event){"use strict";var a=event.getTarget();for(var c=0,e=d.$conditionalHideOnBlur2.length;c<e;c++)if(b("DOM").contains(d.$conditionalHideOnBlur2[c],a))return!1;return!0};function e(){"use strict";c.apply(this,arguments)}this._hovercard.setPosition(this._position).setAlignment("center").enableBehaviors([e,b("LayerHideOnEscape")]);this._hovercard.subscribe("aftershow",this._onHovercardShow.bind(this));this._hovercard.subscribe("hide",this._onHovercardHide.bind(this));this._hovercard.subscribe("destroy",this._onHovercardDestroy.bind(this));this._hovercardScheduled&&this.showHovercard(this._triggerClass,this._context)},showHovercard:function(a,c){b("CSS").addClass(this._target,this._shownClass),this._triggerClass&&this._triggerClass!==a&&b("CSS").removeClass(this._target,this._triggerClass),this._triggerClass=a,this._triggerClass&&b("CSS").addClass(this._target,this._triggerClass),this._context=c,this._hovercard?(this._hovercard.setContext(c||this._target).show(),this._hovercardShown=!0,this._hovercardScheduled=!1,this._hidePlaceholder()):(this._hovercardScheduled=!0,this._fetch(),this._showPlaceholder()),this.inform("showhovercard")},hideHovercard:function(){this._hovercardScheduled=!1,this._hidePlaceholder(),this._hovercard?this._hovercard.hide():this._onHovercardHide()},_showPlaceholder:function(){this._placeholder||(this._placeholder=k(this._dialogClass),this._placeholder.setContext(this._context||this._target).setPosition(this._position).setAlignment("center").show(),this._placeholderListener=this._placeholder.subscribe("hide",this._onPlaceholderHide.bind(this)))},_hidePlaceholder:function(){this._placeholder&&this._placeholder.hide()},_onPlaceholderHide:function(){this._placeholder&&(this._hovercardScheduled=!1,this._placeholderListener&&this._placeholder.unsubscribe(this._placeholderListener),this._placeholder=null,this._hovercardShown||this._removeTriggerClasses())},_onHovercardShow:function(){var a=this._hovercard.getContent();a=b("DOM").scry(a,"textarea.mentionsTextarea")[0];a&&a.focus()},_onHovercardHide:function(){this._hovercardShown=!1,this._removeTriggerClasses(),this.inform("hidehovercard")},_onHovercardDestroy:function(){this._hovercard=null},_removeTriggerClasses:function(){b("CSS").removeClass(this._target,this._shownClass),this._triggerClass&&b("CSS").removeClass(this._target,this._triggerClass)}});e.exports=a}),null);
__d("BulkTagLoader",["AsyncRequest","emptyFunction"],(function(a,b,c,d,e,f){var g=!1;function a(){}Object.assign(a,{loadForSet:function(a){g||(g=!0,new(b("AsyncRequest"))("/ajax/photos/sets/tags_fetch.php").setHandler(b("emptyFunction")).setData({set:a}).send())},loadForAlbum:function(a){g||(g=!0,new(b("AsyncRequest"))("/ajax/photos/album/tags_fetch.php").setHandler(b("emptyFunction")).setData({fbid:a}).send())},reset:function(){g=!1}});e.exports=a}),null);