if (self.CavalryLogger) { CavalryLogger.start_js(["TE0zo"]); }

__d("TimelineAppSectionConstants",[],(function(a,b,c,d,e,f){e.exports={collectionTabKeyToAppTabKey:{friends_recent:"friends",friends_all:"friends",friends_mutual:"friends",photos_of:"photos",photos_all:"photos",photos_albums:"photos",info_all:"about",music_favs:"music",books_read:"books",books_favorite:"books",fitness_overview:"fitness",info_contact:null,fitness_running:"fitness",fitness_cycling:"fitness",friends_followers:"friends",friends_following:"friends",info_history:null,photos_archive:"photos",notes_my_notes:"notes",notes_drafts:"notes",notes_about_me:"notes",video_movies_watch:"movies",video_tv_shows_watch:"tv",video_movies_favorite:"movies",video_tv_shows_favorite:"tv",friends_high_school:"friends",friends_college:"friends",friends_work:"friends",apps_like:"games",upcoming_events:"events",past_events:"events",likes_people:"likes",groups_member:"groups",photos_album:"photos",likes_restaurants:"likes",saved_books:"saved",saved_movies:"saved",saved_tv_shows:"saved",saved_music:"saved",saved_links:"saved",sports_teams:"sports",likes_all:"likes",saved_places:"saved",saved_all:"saved",sports_athletes:"sports",saved_events:"saved",saved_archived:"saved",places_recent:"map",places_visited:"map",reviews_written:"reviews",likes_section_movies:"likes",likes_section_tv_shows:"likes",likes_section_books:"likes",likes_section_music:"likes",likes_section_sports_teams:"likes",places_cities:"map",place_visits_by_city:null,places_map:"map",likes_section_apps_and_games:"likes",likes_section_sports_athletes:"likes",saved_videos:"saved",saved_pages:"saved",friends_with_upcoming_birthdays:"friends",friends_current_city:"friends",friends_hometown:"friends",at_work_contact:null,place_reviews_written:"reviews",movie_reviews_written:"reviews",tv_show_reviews_written:"reviews",book_reviews_written:"reviews",videos_by_user:"videos",videos_user_tagged:"videos",friends_map:"friends",saved_posts:"saved",saved_photo_posts:"saved",saved_products:"saved",at_work_hr_info:null,friends_with_unseen_posts:"friends",groups_mutual:"groups",saved_profiles:"saved",work_followers:"friends",work_following:"friends",saved_messages:"saved",saved_lists:"saved",saved_fundraisers:"saved",saved_jobs:"saved",lists:"lists",list_contents:"lists",saved_group_posts:"saved",saved_offers:"saved",fun_fact_answers:"did_you_know",saved_asset3ds:"saved",instant_games_spotlight:null,saved_marketplace_nearbuy_deals:"saved",stories_archive:"archive",work_bookmarked_coworkers:"friends",instagram_recent_photos_collection_id:null,pokedex_recently_caught_collection_id:null,pokedex_top_catches_collection_id:null,unknown_do_not_use_this:null,followers:"friends",following:"friends",media_set:"photos",photos_stream:"photos",photos_synced:"photos",videos_by:"videos",videos_of:"videos"},alternateCollectionTabKeyToAppTabKey:{following:"following",followers:"followers"}}}),null);
__d("OptimisticPostMetadata.react",["cx","BackgroundImage.react","Link.react","React","XUIText.react","getDOMImageSize"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i="/images/video/play_circle_80dp.png",j=80,k=470,l=263,m=472;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={height:l},this.onGetSize=function(a,b,c){c=a<b?k:l;this.setState({height:c})}.bind(this),b}a.prototype.componentDidMount=function(){"use strict";b("getDOMImageSize")(this.props.image,this.onGetSize)};a.prototype.render=function(){"use strict";var a=this.props.image?b("React").createElement(b("BackgroundImage.react"),{src:this.props.image,backgroundSize:"contain",width:m,height:this.state.height}):b("React").createElement("div",{className:"_6r9x",style:{height:this.state.height}},b("React").createElement(b("BackgroundImage.react"),{src:i,backgroundSize:"contain",width:j,height:j}));return b("React").createElement("div",null,b("React").createElement("div",{className:"_1gi0"},b("React").createElement(b("XUIText.react"),{size:"header4",weight:"bold",display:"block"},b("React").createElement(b("Link.react"),null,this.props.title)),b("React").createElement(b("XUIText.react"),{size:"header4",weight:"normal",display:"block"},this.props.description)),b("React").createElement("div",{className:"_2bc-"},a))};e.exports=a}),null);
__d("OptimisticPostMetadataWithoutThumbnail.react",["cx","EventListener","OptimisticPostMetadata.react","React","ReactDOM","generateVideoThumbnails","promiseDone"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={thumbnail:""},this.$1=null,this.generateVideoThumbnails=function(){var a=b("ReactDOM").findDOMNode(this.refs.videoPlayer);b("promiseDone")(b("generateVideoThumbnails")(a,200,200,1),function(a){this.setState({thumbnail:a.thumbnails[0].getURL()})}.bind(this))}.bind(this),c}a.prototype.componentDidMount=function(){"use strict";var a=b("ReactDOM").findDOMNode(this.refs.videoPlayer);this.$1=b("EventListener").listen(a,"loadedmetadata",this.generateVideoThumbnails)};a.prototype.componentWillUnmount=function(){"use strict";this.$1&&(this.$1.remove(),this.$1=null)};a.prototype.render=function(){"use strict";return b("React").createElement("div",null,b("React").createElement(b("OptimisticPostMetadata.react"),{title:this.props.title,description:this.props.description,image:this.state.thumbnail}),b("React").createElement("video",{key:"videoPlayer",ref:"videoPlayer",className:"_2mpk",src:this.props.videoFileUrl}))};e.exports=a}),null);
__d("OptimisticPostUFISection.react",["ix","cx","fbt","Image.react","React","SUIBusinessThemeContainer.react","SUIText.react","XUICardSection.react","XUIPopoverButton.react","asset"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j;j=babelHelpers.inherits(a,b("React").Component);j&&j.prototype;a.prototype.render=function(){"use strict";var a=null;this.props.isPagePost&&(a=b("React").createElement("div",{className:"_2qa2"},b("React").createElement(b("XUIPopoverButton.react"),{haschevron:!0,image:b("React").createElement(b("Image.react"),{width:16,height:16,src:this.props.profilePicture}),ref:"open-menu-button",suppressed:!0,type:"button"})));return b("React").createElement(b("SUIBusinessThemeContainer.react"),null,b("React").createElement(b("XUICardSection.react"),null,b("React").createElement("div",{className:"_2qa3"},b("React").createElement("div",{className:"_2qa4"},b("React").createElement("div",{className:"_2qa5"},b("React").createElement(b("Image.react"),{className:"_2qa7",src:g("529238")}),b("React").createElement(b("SUIText.react"),{color:"secondary",size:"body2",weight:"bold"},i._("Like"))),b("React").createElement("div",{className:"_2qa5"},b("React").createElement(b("Image.react"),{className:"_2qa7",src:g("510900")}),b("React").createElement(b("SUIText.react"),{color:"secondary",size:"body2",weight:"bold"},i._("Comment"))),b("React").createElement("div",{className:"_2qa5"},b("React").createElement(b("Image.react"),{className:"_2qa7",src:g("508130")}),b("React").createElement(b("SUIText.react"),{color:"secondary",size:"body2",weight:"bold"},i._("Share")))),a)))};function a(){"use strict";j.apply(this,arguments)}e.exports=a}),null);
__d("OptimisticVideoPost.react",["fbt","cx","ActorURI","AsyncRequest","Layout.react","LeftRight.react","OptimisticPostMetadata.react","OptimisticPostMetadataWithoutThumbnail.react","OptimisticPostUFISection.react","PrivacyConst","ProgressBar.react","PublishingToolsSource","React","ScheduledLiveStoryPreview.react","StoryProfile.react","VideoEditSource","VideoLibraryButton.react","VideoLibrarySource","VideoThumbnailConfig","XUIAmbientNUX.react","XUIButton.react","XUICard.react","XUICardSection.react","XVideoEditController","XVideoEditDialogController"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i,j=b("Layout.react").Column,k=b("Layout.react").FillColumn;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={shouldShowVideoLibraryNux:this.props.shouldShowVideoLibraryNux,videoLibraryNuxImpression:0,useComposerV2:!1},this.getThumbnail=function(){return this.props.thumbnail?this.props.thumbnail:b("VideoThumbnailConfig").defaultThumbnailURL}.bind(this),this.onEditClick=function(){var a;this.props.shouldShowVideoEditDialog?(a=b("XVideoEditDialogController").getURIBuilder().setInt("video_id",this.props.videoID).setEnum("source",b("VideoEditSource").OPTIMISTIC_VIDEO_POST).getURI(),this.props.targetID&&(a=b("ActorURI").create(a,this.props.targetID)),new(b("AsyncRequest"))(a).send()):(a=b("XVideoEditController").getURIBuilder().setInt("v",this.props.videoID).setEnum("source",b("VideoEditSource").OPTIMISTIC_VIDEO_POST).getURI(),window.open(a,"_blank"))}.bind(this),this.onNuxDismiss=function(){this.setState({shouldShowVideoLibraryNux:!1}),this.props.onVideoLibraryNuxDismiss()}.bind(this),this.renderLayers=function(){return!this.props.shouldShowVideoLibraryNux?null:b("React").createElement(b("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.video_library_button}.bind(this),shown:!0,position:"above",onCloseButtonClick:this.props.onVideoLibraryNuxDismiss,key:"videoLibraryNux"},"Manage your videos, all in one place.")}.bind(this),c}a.prototype.render=function(){"use strict";__p&&__p();var a=g._("Just Now"),c;this.props.progress>=100&&this.props.progressCompleteText?c=this.props.progressCompleteText:c=g._("Preparing... {number} \u0025",[g._param("number",this.props.progress)]);var d=null;this.props.shouldShowVideoLibraryButton&&(d=b("React").createElement(b("VideoLibraryButton.react"),{ref:"video_library_button",pageID:this.props.targetID,source:b("VideoLibrarySource").OPTIMISTIC_VIDEO_POST,refSource:b("PublishingToolsSource").OPTIMISTIC_VIDEO_POST}));var e=null;this.props.shouldShowVideoEditButton&&(e=b("React").createElement(b("XUIButton.react"),{className:"_4p26",label:"Edit",size:"small",onClick:this.onEditClick}));c=b("React").createElement(b("XUICardSection.react"),{background:"light-wash"},b("React").createElement("div",{className:"_pro"},b("React").createElement("div",{className:"_2uu3"},b("React").createElement(b("Layout.react"),{className:"_1mg"},b("React").createElement(k,null,b("React").createElement("div",null,b("React").createElement(b("ProgressBar.react"),{className:"_prp",value:this.props.progress,label:c}))),b("React").createElement(j,null,b("React").createElement("div",null,d,e))))));d=this.props.profilePicture||"";e=this.props.username||"";var f=this.props.privacySetting||-1;d=this.props.isPremiere?null:b("React").createElement(b("StoryProfile.react"),{className:"_4r8g",profilePicture:d,username:e,uploadTime:a,privacySetting:f});e=null;this.props.isPremiere?e=b("React").createElement(b("ScheduledLiveStoryPreview.react"),{targetID:this.props.targetID||"",description:this.props.metadataDescription||"",isPremiere:!0,plannedStartTime:this.props.premiereTimeSeconds||0,useComposerV2:this.state.useComposerV2}):e=this.props.thumbnail?b("React").createElement(b("OptimisticPostMetadata.react"),{title:this.props.metadataTitle,description:this.props.metadataDescription,image:this.getThumbnail()}):b("React").createElement(b("OptimisticPostMetadataWithoutThumbnail.react"),{title:this.props.metadataTitle,description:this.props.metadataDescription,videoFileUrl:this.props.videoFileUrl});a=g._("Boost Post");f=this.props.isPagePost?b("React").createElement("div",{className:"_5c_1"},b("React").createElement(b("LeftRight.react"),null,b("React").createElement("div",null),b("React").createElement(b("XUIButton.react"),{label:a,use:"confirm"}))):null;a=b("React").createElement(b("OptimisticPostUFISection.react"),{profilePicture:this.props.profilePicture,isPagePost:this.props.isPagePost});d=b("React").createElement("div",null,d,e,f,a);e=b("React").createElement("div",{className:"_5c_3"});return b("React").createElement("div",{className:this.props.isPagePost?"_5ctl":""},b("React").createElement(b("XUICard.react"),{className:"_4p28"},c,b("React").createElement("div",{className:"_prq"},d,e)),this.renderLayers())};a.propTypes={profilePicture:c.string,username:c.string,privacySetting:c.number,metadataTitle:c.string,metadataDescription:c.string,thumbnail:c.string,videoID:c.string,isPagePost:c.bool,isPremiere:c.bool,premiereTimeSeconds:c.number,progress:c.number,progressCompleteText:c.string,shouldShowVideoEditButton:c.bool,shouldShowVideoEditDialog:c.bool,targetID:c.string,videoFileUrl:c.string,shouldShowVideoLibraryNux:c.bool};a.defaultProps={profilePicture:"",username:"",privacySetting:b("PrivacyConst").BaseValue.EVERYONE,metadataTitle:"",metadataDescription:"",thumbnail:"",progress:0,videoID:"",isPagePost:!1,isPremiere:!1,premiereTimeSeconds:0,progressCompleteText:"",shouldShowVideoEditButton:!0,shouldShowVideoEditDialog:!1,videoFileUrl:"",shouldShowVideoLibraryNux:!1};e.exports=a}),null);
__d("OptimisticVideoPostEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({VIDEO_POST_ADDED:"video_post_added",VIDEO_POST_REMOVED:"video_post_removed",POST_REMOVED_WITHOUT_REPLACEMENT:"post_removed_without_replacement"})}),null);
__d("OptimisticVideoPostLogger",["BanzaiLogger"],(function(a,b,c,d,e,f){a={logEvent:function(event,a,c,d,e){b("BanzaiLogger").log("OptimisticVideoPostLoggerConfig",{number_of_posts:c,source:a,event:event,target_id:d,video_id:e})}};e.exports=a}),null);
__d("OptimisticVideoPostSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PAGES_TIMELINE:"pages_timeline",VIDEO_HUB:"video_hub",USERS_TIMELINE:"users_timeline"})}),null);
__d("VideoLibraryNuxAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({IMPRESSION:"impression",DISMISS:"dismiss"})}),null);
__d("VideoLibraryNuxType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({HIGHLIGHTED_VIDEOS_NUX:"highlighted_videos_nux",OPTIMISTIC_POST_NUX:"optimistic_post_nux",VIDEO_HUB_NUX:"video_hub_nux",VIDEO_INSIGHTS_NUX:"video_insights_nux"})}),null);
__d("XVideoCaptionRenderGenerateHeaderAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/videos/captioneditor/pagePosts/",{video_id:{type:"Int"}})}),null);
__d("VideoPostGenerateCaptionHeader",["csx","AsyncRequest","DOM","Parent","XVideoCaptionRenderGenerateHeaderAsyncController"],(function(a,b,c,d,e,f,g){__p&&__p();a={renderHeader:function(a,c){__p&&__p();a=b("Parent").bySelector(a,"#pagelet_timeline_main_column");if(!a)return;a=b("DOM").scry(a,"._5sem")[0];if(a){var d=b("DOM").create("div");b("DOM").prependContent(a,d);a=b("XVideoCaptionRenderGenerateHeaderAsyncController").getURIBuilder().setInt("video_id",c).getURI();new(b("AsyncRequest"))().setMethod("GET").setRelativeTo(d).setURI(a).setReadOnly(!0).setAllowCrossPageTransition(!0).send()}}};e.exports=a}),null);
__d("XProfileVideoRefreshController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/profile/picture/refresh_profile_video/",{video_id:{type:"FBID",required:!0}})}),null);
__d("XVideoLibraryNuxController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/video_library/nux/",{action:{type:"Enum",required:!0,enumType:1},nux_type:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XVideoOptimisticPostingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/optimistic_posting/",{video_id:{type:"Int",required:!0}})}),null);
__d("OptimisticVideoPostList.react",["Arbiter","AsyncRequest","ChannelConstants","FBFeedLocations","OptimisticVideoPost.react","OptimisticVideoPostEvent","OptimisticVideoPostLogger","OptimisticVideoPostSource","OptimisticVideoPostUtils","PagesComposer","ProfileVideoWWWFrontendActionTypedLogger","React","ReactDOM","ReloadPage","Run","TimelineComposer","VideoLibraryNuxAction","VideoLibraryNuxType","VideoPostGenerateCaptionHeader","VideoUploadProgressUtils","XProfileVideoRefreshController","XVideoGenerateStoryController","XVideoLibraryNuxController","XVideoOptimisticPostingController"],(function(a,b,c,d,e,f){__p&&__p();var g,h=a.URL||a.webkitURL||{},i="video_encode",j=7,k=5e3,l=2,m=1e3;d=babelHelpers.inherits(c,b("React").Component);g=d&&d.prototype;function c(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.state={videoPostsMetadata:{},videoPosts:[],shouldRefreshAfterEncoding:!1,shouldShowVideoEditButton:!0,shouldShowVideoLibraryButton:this.props.shouldShowVideoLibraryButton,shouldShowVideoLibraryNux:this.props.shouldShowVideoLibraryNux,videoLibraryNuxImpression:0,videoLibraryNuxImpressionLogged:!1,renderedVideoPosts:[]},this.initializePosts=function(){__p&&__p();var a=[],c={};for(var d=0;d<this.props.data.length;d++){if(!b("OptimisticVideoPostUtils").shouldShowOptimisticPost(this.props.data[d]))break;var e=babelHelpers["extends"]({},this.props.data[d],{shouldRender:!1});e.progress=0;e.progressWithoutFake=0;var f=e.videoID;e.inactivityTimer=this.startInactivityTimer(f);a.push(f);c[f]=e}this.setState({videoPostsMetadata:c,videoPosts:a})}.bind(this),this.getChannelType=function(){return b("ChannelConstants").getArbiterType(i)},this.updateVideoData=function(a){__p&&__p();var c={};c[a.videoID]=babelHelpers["extends"]({},a,{shouldRender:!0,fakeProgressTimer:setInterval(function(){return this.fakeInitialProgress(a.videoID)}.bind(this),3e3),inactivityTimer:this.startInactivityTimer(a.videoID)});c[a.videoID].progress=0;c[a.videoID].progressWithoutFake=0;c=babelHelpers["extends"]({},this.state.videoPostsMetadata,c);var d=[a.videoID].concat(this.state.videoPosts);this.$1=a.refreshTimeout;this.$2=a.originalComposerID;this.$3=a.progressCompleteText;this.setState({shouldRefreshAfterEncoding:!!a.shouldRefreshAfterEncoding,shouldShowVideoEditButton:a.shouldShowVideoEditButton!=null?a.shouldShowVideoEditButton:!0,shouldShowVideoLibraryButton:a.shouldShowVideoLibraryButton!=null?a.shouldShowVideoLibraryButton:this.state.shouldShowVideoLibraryButton,videoPostsMetadata:c,videoPosts:d});this.logEvent(b("OptimisticVideoPostEvent").VIDEO_POST_ADDED,a.videoID)}.bind(this),this.onVideoPostSubmitted=function(a,c){if(!b("OptimisticVideoPostUtils").shouldShowOptimisticPost(c))return;if(!c.isToUserProfile){this.updateVideoData(c);return}a=b("XVideoOptimisticPostingController").getURIBuilder().setInt("video_id",c.videoID).getURI();new(b("AsyncRequest"))().setURI(a).setHandler(function(a){this.updateVideoData(babelHelpers["extends"]({},a.payload,{videoFileUrl:c.videoFileURL}))}.bind(this)).send()}.bind(this),this.checkVideoStatus=function(a){b("OptimisticVideoPostUtils").checkVideoStatus(a,this.onEncodeFinish,this.onEncodeFinish,this.restartInactivityTimer)}.bind(this),this.startInactivityTimer=function(a){return setTimeout(function(){return this.checkVideoStatus(a)}.bind(this),k)}.bind(this),this.restartInactivityTimer=function(a){this.stopInactivityTimer(a);var b=babelHelpers["extends"]({},this.state.videoPostsMetadata),c=babelHelpers["extends"]({},b[a]);c.inactivityTimer=this.startInactivityTimer(a);b[a]=c;this.setState({videoPostsMetadata:b})}.bind(this),this.stopInactivityTimer=function(a){clearTimeout(this.state.videoPostsMetadata[a].inactivityTimer)}.bind(this),this.logEvent=function(event,a){b("OptimisticVideoPostLogger").logEvent(event,this.props.isPagePost?b("OptimisticVideoPostSource").PAGES_TIMELINE:b("OptimisticVideoPostSource").USERS_TIMELINE,this.state.videoPosts.length,this.props.targetID,a)}.bind(this),this.fakeInitialProgress=function(a){__p&&__p();var b=this.state.videoPostsMetadata[a].progress;if(b>j){this.stopFakeInitialProgress(a);return}b=babelHelpers["extends"]({},this.state.videoPostsMetadata);var c=babelHelpers["extends"]({},b[a]);c.progress+=1;b[a]=c;this.setState({videoPostsMetadata:b});this.restartInactivityTimer(a)}.bind(this),this.stopFakeInitialProgress=function(a){if(!this.state.videoPostsMetadata[a].fakeProgressTimer)return;var b=babelHelpers["extends"]({},this.state.videoPostsMetadata);clearTimeout(b[a].fakeProgressTimer);var c=babelHelpers["extends"]({},b[a]);c.fakeProgressTimer=null;b[a]=c;this.setState({videoPostsMetadata:b})}.bind(this),this.onEncodeUpdate=function(a,c){__p&&__p();a=String(c.obj.videoID);if(!this.state.videoPostsMetadata[a])return;var d=babelHelpers["extends"]({},this.state.videoPostsMetadata),e=babelHelpers["extends"]({},d[a]),f={progress:e.progress,progressWithoutFake:e.progressWithoutFake};f=b("VideoUploadProgressUtils").getUpdatedProgress(c,f);f.progress!==-1&&(this.stopFakeInitialProgress(a),e.progress=f.progress,e.shouldRender=!0);e.progressWithoutFake=f.progressWithoutFake;d[a]=e;this.setState({videoPostsMetadata:d});b("VideoUploadProgressUtils").isEncodingFinished(c.obj.stage)?this.onEncodeFinish(a):this.restartInactivityTimer(a)}.bind(this),this.onEncodeFinish=function(a){if(!this.state.videoPostsMetadata[a])return;this.stopInactivityTimer(a);var c=this.props.isPagePost?b("FBFeedLocations").PAGE_TIMELINE:b("FBFeedLocations").TIMELINE,d=b("XVideoGenerateStoryController").getURIBuilder().setInt("video_id",a).setEnum("feed_location",c).getURI();new(b("AsyncRequest"))().setURI(d).setData({video_id:a,feed_location:c}).setHandler(function(b){return this.handleRequest(b,a)}.bind(this)).send()}.bind(this),this.refreshWhenDone=function(a){var c=!0,d=Date.now(),e=setInterval(function(){if(c){c=!1;var f=b("XProfileVideoRefreshController").getURIBuilder().setFBID("video_id",a).getURI();new(b("AsyncRequest"))().setURI(f).setHandler(function(a){c=!0,a.payload.profile_video_is_set?(clearInterval(e),new(b("ProfileVideoWWWFrontendActionTypedLogger"))().setEvent("profile_video_set").setSessionID(this.$2).log(),b("ReloadPage").now()):Date.now()-d>this.$1&&clearInterval(e)}.bind(this)).send()}}.bind(this),m)}.bind(this),this.removeOptimisticPost=function(a){var c=babelHelpers["extends"]({},this.state.videoPostsMetadata);delete c[a];var d=this.state.videoPosts;d=this.removeVideoID(d,a);this.setState({videoPostsMetadata:c,videoPosts:d});this.logEvent(b("OptimisticVideoPostEvent").VIDEO_POST_REMOVED,a)}.bind(this),this.removeVideoID=function(a,b){b=a.indexOf(b);a.splice(b,1);return a},this.onVideoLibraryNuxShown=function(){var a=this.state.videoLibraryNuxImpression+1;this.setState({videoLibraryNuxImpression:a});a>=l&&this.setState({shouldShowVideoLibraryNux:!1})}.bind(this),this.onVideoLibraryNuxDismiss=function(){this.setState({shouldShowVideoLibraryNux:!1});var a=b("XVideoLibraryNuxController").getURIBuilder().setEnum("action",b("VideoLibraryNuxAction").DISMISS).setEnum("nux_type",b("VideoLibraryNuxType").OPTIMISTIC_POST_NUX).getURI();new(b("AsyncRequest"))().setURI(a).send()}.bind(this),this.setThumbnailURL=function(a,b){var c=babelHelpers["extends"]({},this.state.videoPostsMetadata);c[b].videoThumbnail=a;this.setState({videoPostsMetadata:c})}.bind(this),c}c.prototype.componentDidUpdate=function(){"use strict";if(!this.state.videoLibraryNuxImpressionLogged&&this.state.videoPosts.length>0&&this.state.shouldShowVideoLibraryNux){var a=b("XVideoLibraryNuxController").getURIBuilder().setEnum("action",b("VideoLibraryNuxAction").IMPRESSION).setEnum("nux_type",b("VideoLibraryNuxType").OPTIMISTIC_POST_NUX).getURI();new(b("AsyncRequest"))().setURI(a).send();this.setState({videoLibraryNuxImpressionLogged:!0})}};c.prototype.componentDidMount=function(){"use strict";var a=b("Arbiter").subscribe("videoUpload/complete",this.onVideoPostSubmitted),c=b("Arbiter").subscribe(this.getChannelType(),this.onEncodeUpdate);b("Run").onLeave(function(){return a.unsubscribe()});b("Run").onLeave(function(){return c.unsubscribe()});this.props.data.length>0&&this.initializePosts()};c.prototype.handleRequest=function(a,c){"use strict";__p&&__p();a=a.payload;if(a)if(this.props.isPagePost){if(this.state.renderedVideoPosts.includes(c))return;this.setState(function(a,b){return{renderedVideoPosts:a.renderedVideoPosts.concat([c])}});b("PagesComposer").renderStory(b("ReactDOM").findDOMNode(this),a);this.props.shouldShowVideoCaptionHeader&&b("VideoPostGenerateCaptionHeader").renderHeader(b("ReactDOM").findDOMNode(this),c)}else b("TimelineComposer").renderCapsuleBasedStory(b("ReactDOM").findDOMNode(this),a);else this.logEvent(b("OptimisticVideoPostEvent").POST_REMOVED_WITHOUT_REPLACEMENT,c);this.state.shouldRefreshAfterEncoding?this.refreshWhenDone(c):this.removeOptimisticPost(c)};c.prototype.renderOptimisticPost=function(a,c){"use strict";if(!a.shouldRender)return b("React").createElement("div",{key:a.videoID});var d;a.videoThumbnail?d=a.videoThumbnail:h.createObjectURL&&a&&a.videoThumbnailBlob?(d=h.createObjectURL(a.videoThumbnailBlob),this.setThumbnailURL(d,a.videoID)):d="";return b("React").createElement(b("OptimisticVideoPost.react"),{username:a.userDisplayName,profilePicture:a.userProfilePictureURI,metadataTitle:a.videoTitle,metadataDescription:a.videoDescription,thumbnail:d,videoID:a.videoID,videoFileUrl:a.videoFileUrl,key:a.videoID,progress:a.progress,privacySetting:a.privacySetting,isPagePost:this.props.isPagePost,isPremiere:a.isPremiere,shouldShowVideoEditButton:this.state.shouldShowVideoEditButton,shouldShowVideoEditDialog:this.props.shouldShowVideoEditDialog,targetID:this.props.targetID,premiereTimeSeconds:a.premiereTimeMs/1e3,progressCompleteText:this.$3,shouldShowVideoLibraryButton:this.state.shouldShowVideoLibraryButton,shouldShowVideoLibraryNux:c,onVideoLibraryNuxDismiss:this.onVideoLibraryNuxDismiss,onVideoLibraryNuxShown:this.onVideoLibraryNuxShown})};c.prototype.render=function(){"use strict";var a=this.state.videoPostsMetadata,c=this.state.videoPosts.map(function(b,c){return this.renderOptimisticPost(a[b],c===0&&this.state.shouldShowVideoLibraryNux)}.bind(this));return b("React").createElement("ul",null,c)};e.exports=c}),null);
__d("OptimisticVideoPostController",["CSS","OptimisticVideoPostList.react","React","ReactDOM"],(function(a,b,c,d,e,f){a={init:function(a,c,d,e,f,g,h,i){this._postsContainer=a,b("ReactDOM").render(b("React").createElement(b("OptimisticVideoPostList.react"),{data:c,targetID:d,isPagePost:e,shouldShowVideoEditDialog:f,shouldShowVideoLibraryButton:g,shouldShowVideoLibraryNux:h,shouldShowVideoCaptionHeader:i}),this._postsContainer),b("CSS").show(this._postsContainer)}};e.exports=a}),null);
__d("FollowLink",["Arbiter","CSS","ge"],(function(a,b,c,d,e,f){a={subscribeEvents:function(a,c,d){b("Arbiter").subscribe(["FollowUser","UnfollowUser"],function(event,e){if(e.profile_id!=a)return;e=b("ge")(c);var f=b("ge")(d),g=event=="FollowUser";e&&b("CSS").conditionShow(e,!g);f&&b("CSS").conditionShow(f,g)})}};e.exports=a}),null);
__d("ProfileTimelineTailLoadTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:ProfileTimelineTailLoadLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:ProfileTimelineTailLoadLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:ProfileTimelineTailLoadLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setBufferPx=function(a){this.$1.buffer_px=a;return this};a.prototype.setDisplayDone=function(a){this.$1.display_done=a;return this};a.prototype.setPageSize=function(a){this.$1.page_size=a;return this};a.prototype.setTailLoadPosition=function(a){this.$1.tail_load_position=a;return this};a.prototype.setTailLoadStatus=function(a){this.$1.tail_load_status=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setVisibleDuration=function(a){this.$1.visible_duration=a;return this};c={buffer_px:!0,display_done:!0,page_size:!0,tail_load_position:!0,tail_load_status:!0,vc:!0,visible_duration:!0};e.exports=a}),null);
__d("Optimus",["Event","Parent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={};function h(a,c){__p&&__p();var d=c.getTarget();if(!d)return;var e=g[a];for(var f in e){var h=b("Parent").byAttribute(d,f);if(h)do{var i=e[f][h.getAttribute(f)];if(i&&i.handleOptimus(a,h,c)===!1)break}while(h=h.parentNode&&b("Parent").byAttribute(h.parentNode,f))}}function i(c,d,f,a){g[c]||(g[c]={},b("Event").listen(document.documentElement,c,h.bind(null,c))),g[c][d]||(g[c][d]={}),g[c][d][f]||(g[c][d][f]=a)}e.exports={addRelClick:function(b,a){i("click","rel",b,a)},addEventListener:i}}),null);
__d("ProfileActionBarLogger",["FBJSON","MarauderLogger","Optimus"],(function(a,b,c,d,e,f){function a(){b("Optimus").addEventListener("mouseup","data-loggable","ProfileHighQualityLogger",{handleOptimus:function(a,c,d){b("MarauderLogger").log("profile_high_quality_action",null,b("FBJSON").parse(c.getAttribute("data-store")));return!1}})}f.init=a}),null);
__d("DoublyLinkedListMap",[],(function(a,b,c,d,e,f){__p&&__p();function a(){"use strict";this._head=null,this._tail=null,this._nodes={},this._nodeCount=0}a.prototype.get=function(a){a=(a=this._nodes[a])!=null?a.data:a;return a?a:null};a.prototype.getIndex=function(a){"use strict";var b=this._head;for(var c=0;b;b=b.next,c++)if(b.key===a)return c;return null};a.prototype._insert=function(a,b,c,d){"use strict";__p&&__p();c&&!this._nodes[c]&&(c=null);c&&this._nodes[c]?c=this._nodes[c]:c=d?this._head:this._tail;b={data:b,key:a,next:null,prev:null};c&&(this.remove(a),d?(b.prev=c.prev,c.prev&&(c.prev.next=b),c.prev=b,b.next=c):(b.next=c.next,c.next&&(c.next.prev=b),c.next=b,b.prev=c));b.prev===null&&(this._head=b);b.next===null&&(this._tail=b);this._nodes[a]=b;this._nodeCount++;return this};a.prototype.insertBefore=function(a,b,c){"use strict";return this._insert(a,b,c,!0)};a.prototype.insertAfter=function(a,b,c){"use strict";return this._insert(a,b,c,!1)};a.prototype.prepend=function(a,b){"use strict";return this.insertBefore(a,b,this._head&&this._head.key)};a.prototype.append=function(a,b){"use strict";return this.insertAfter(a,b,this._tail&&this._tail.key)};a.prototype.remove=function(a){"use strict";__p&&__p();var b=this._nodes[a];if(b){var c=b.next,d=b.prev;c&&(c.prev=d);d&&(d.next=c);this._head===b&&(this._head=c);this._tail===b&&(this._tail=d);delete this._nodes[a];this._nodeCount--}return this};a.prototype.find=function(a){"use strict";for(var b=this._head;b;b=b.next)if(a(b.data))return b.key;return null};a.prototype.reduce=function(a,b){"use strict";for(var c=this._head;c;c=c.next)b=a(c.data,b);return b};a.prototype.exists=function(a){"use strict";return!!this._nodes[a]};a.prototype.isEmpty=function(){"use strict";return!this._head};a.prototype.reset=function(){"use strict";this._head=null,this._tail=null,this._nodes={},this._nodeCount=0};a.prototype.map=function(a){"use strict";for(var b=this._head;b;b=b.next)a(b.data)};a.prototype.getCount=function(){"use strict";return this._nodeCount};a.prototype.getHead=function(){var a;return(a=this._head)!=null?a.data:a};a.prototype.getTail=function(){var a;return(a=this._tail)!=null?a.data:a};a.prototype.getNext=function(a){return(a=this._nodes[a])!=null?(a=a.next)!=null?a.data:a:a};a.prototype.getPrev=function(a){return(a=this._nodes[a])!=null?(a=a.prev)!=null?a.data:a:a};a.prototype.getHeadKey=function(){var a;return(a=this._head)!=null?a.key:a};a.prototype.getTailKey=function(){var a;return(a=this._tail)!=null?a.key:a};e.exports=a}),null);
__d("ProfileOverviewSection",["CallbackDependencyManager","DOMScroll","DoublyLinkedListMap","TidyArbiterMixin","ge"],(function(a,b,c,d,e,f){__p&&__p();var g=null,h=new(b("CallbackDependencyManager"))(),i={};function a(a,c,d){"use strict";this.id=a,this.label=d,this.nodeID=c,this._isLoaded=!1,this._parentSection=null,this.childSections=new(b("DoublyLinkedListMap"))(),i[a]=this,setTimeout(function(){return h.satisfyPersistentDependency(a)},0)}a.prototype.reset=function(){"use strict";this.childSections.map(function(a){return a.reset()})};a.prototype.appendSection=function(a){"use strict";this.childSections.append(a.id,a),a._parentSection=this};a.prototype.freeze=function(){"use strict";this.freezeChildren()};a.prototype.freezeChildren=function(){"use strict";var a=this.childSections.getHead();while(a)a.isActive()||a.freeze(),a=a.getNext()};a.prototype.getParent=function(){"use strict";return this._parentSection};a.prototype.getChildren=function(){"use strict";return this.childSections};a.prototype.getNext=function(){"use strict";return this._parentSection&&this._parentSection.childSections.getNext(this.id)};a.prototype.getPrev=function(){"use strict";return this._parentSection&&this._parentSection.childSections.getPrev(this.id)};a.prototype.isActive=function(){"use strict";var a=this;while(a){if(a.id===g)return!0;a=a._parentSection}return!1};a.prototype.isLoaded=function(){"use strict";return this._isLoaded};a.prototype.setIsLoaded=function(a){"use strict";this._isLoaded=a;return this};a.prototype.scrollTo=function(){"use strict";if(!b("ge")(this.nodeID))return;b("DOMScroll").scrollTo(this.getNode(),!0,!1,0,0,b("DOMScroll").scrollTo.bind(this).bind(null,this.getNode(),0))};a.prototype.thaw=function(){"use strict";this.thawChildren()};a.prototype.thawChildren=function(){"use strict";var a=this.childSections.getHead();while(a)a.thaw(),a=a.getNext()};a.prototype.getNode=function(){"use strict";throw new Error("This function needs to be implemented in children.")};a.callWithSection=function(a,b){"use strict";h.registerCallback(function(){b(i[a])},[a])};a.setActiveSectionID=function(a){"use strict";g=a};a.resetGlobalState=function(){"use strict";g=null,h=new(b("CallbackDependencyManager"))(),i={}};Object.assign(a,b("TidyArbiterMixin"));e.exports=a}),null);
__d("ProfileEscapeHatch",["Arbiter","CSS","ProfileTabUtils","Run"],(function(a,b,c,d,e,f){__p&&__p();var g=[],h=!1;function i(a){g.forEach(function(c){b("CSS").conditionShow(c.getRoot(),!b("ProfileTabUtils").isOverviewTab(a))})}function a(a){"use strict";__p&&__p();this.$1=a;g.push(this);if(!h){var c=b("Arbiter").subscribe("TimelineController/sectionKeyChange",function(event,a){return i(a[0])});b("Run").onLeave(function(){g=[],c.unsubscribe()});h=!0}}a.prototype.getRoot=function(){"use strict";return this.$1};e.exports=a}),null);
__d("TimelineURI",["BizSiteIdentifier.brands","BusinessURI.brands","ProfileTabConst","TimelineAppSectionConstants","URI","goURI"],(function(a,b,c,d,e,f){__p&&__p();var g={parseURI:function(a){__p&&__p();a=new(b("URI"))(a);var c=a.getQueryData();a=a.getPath();var d=a.split("/").slice(1);(d[0]=="people"||d[0]=="pages")&&(d=d.slice(2));var e=c.sk||d[1]||b("ProfileTabConst").TIMELINE;e==b("ProfileTabConst").WALL&&(e=b("ProfileTabConst").TIMELINE);var f=null,g=null;e==b("ProfileTabConst").TIMELINE&&(g=parseInt(d[2],10)||null,f=parseInt(d[3],10)||null);return{path:a,id:c.id||d[0],key:e,viewas:c.viewas?c.viewas:"0",filter:c.filter?c.filter:null,year:g,month:f,friendship:!!c.and}},goToProfileID:function(a){b("BizSiteIdentifier.brands").isBizSite()?b("goURI")(b("BusinessURI.brands")("/profile.php").addQueryData("id",a),!0):b("goURI")(new(b("URI"))("/"+a),!0)},getTabKeyFromURI:function(a){a=g.getSectionKeyFromURI(a);return b("TimelineAppSectionConstants").collectionTabKeyToAppTabKey[a]||a},getSectionKeyFromURI:function(a){return a.getQueryData().sk||a.getPath().split("/")[2]||b("ProfileTabConst").TIMELINE},getVanityFromURI:function(a){var b=a.getQueryData().id;return b||a.getPath().split("/")[1]},isVideoPermalink:function(a){return g.getTabKeyFromURI(a)===b("ProfileTabConst").VIDEOS&&a.getPath().split("/").filter(function(a){return!!a}).length>2}};e.exports=g}),null);
__d("ProfileNavigation",["Arbiter","CSS","DOMScroll","PageTransitions","ProfileDOMID","ProfileScriptPath","ProfileTabConst","ProfileTabUtils","ScriptPath","TimelineController","TimelineURI","UIPagelet","URI","$","ge"],(function(a,b,c,d,e,f){__p&&__p();var g=7,h=null,i=null;function j(a){__p&&__p();var c=b("URI").getMostRecentURI(),d=b("TimelineURI").getSectionKeyFromURI(c),e=b("TimelineURI").getTabKeyFromURI(c),f=c.getQueryData();f=f.subkey;var g=b("TimelineURI").getSectionKeyFromURI(a),i=b("TimelineURI").getTabKeyFromURI(a),j=a.getQueryData(),l=j.subkey;if(q(c,a)||r(i)||r(e)||!!j.and||b("TimelineURI").isVideoPermalink(a))return!1;if(j.hc_location==="profile_browser")return!1;if(Object.prototype.hasOwnProperty.call(j,"theater")){b("Arbiter").subscribeOnce("PhotoSnowlift.CLOSE",s);return!1}if(Object.prototype.hasOwnProperty.call(j,"force-refresh"))return!1;if(b("ProfileTabUtils").normalizeTabKey(e)===b("ProfileTabUtils").normalizeTabKey(i)&&b("ProfileTabUtils").normalizeTabKey(d)===b("ProfileTabUtils").normalizeTabKey(g)&&f===l)return!1;if(b("ProfileTabUtils").isTimelineOverviewTab(e)&&b("ProfileTabUtils").isTimelineOverviewTab(i)&&f!==l){b("TimelineController").registerCurrentKey(i,l);b("PageTransitions").transitionComplete();return!0}if(!b("ProfileTabUtils").isMedleyTab(e)&&b("ProfileTabUtils").isMedleyTab(i)&&p(g)){h=g;k(g,b("ProfileTabUtils").getPageletForTabKey(i),b("ProfileTabUtils").getIDForTabKey(e),b("ProfileTabUtils").getIDForTabKey(i),j);return!0}if(!b("ProfileTabUtils").isMedleyTab(i)){b("ProfileTabUtils").isMedleyTab(e)&&(h=d);k(b("ProfileTabUtils").normalizeTabKey(i),b("ProfileTabUtils").getPageletForTabKey(i),b("ProfileTabUtils").getIDForTabKey(e),b("ProfileTabUtils").getIDForTabKey(i),j);return!0}return!1}function k(a,c,d,e,f){__p&&__p();var g=b("ge")("fbTimelineHeadline");g&&!b("DOMScroll").isCurrentlyVisible(g)&&window.scrollTo(0,0);b("CSS").hide(b("$")(d));b("Arbiter").inform("save_facebar_query",!0);g=b("ge")(e);g?(b("CSS").show(g),o(a)):l(c,a,f);d=b("ge")("pageFooter");d&&b("CSS").conditionShow(d,!b("ProfileTabUtils").isTimelineTab(a));e=f&&f.subkey?String(f.subkey):null;b("TimelineController").registerCurrentKey(a,e)}function l(a,c,d){m();var e=babelHelpers["extends"]({},i,{tab_key:c});d&&(e=babelHelpers["extends"]({},e,d));d=function(a){n(),a()};d={append:!0,displayCallback:d,finallyHandler:o.bind(null,c),usePipe:!0};b("UIPagelet").loadFromEndpoint(a,b("ProfileDOMID").MAIN_COLUMN_PERSONAL,e,d)}function m(){b("CSS").show(b("$")(b("ProfileDOMID").TAB_LOAD_INDICATOR))}function n(){b("CSS").hide(b("$")(b("ProfileDOMID").TAB_LOAD_INDICATOR))}function o(a){b("ScriptPath").set(t.getScriptPath(a),null,{entity_id:b("TimelineController").getProfileID(),profile_session_id:b("TimelineController").getSessionToken()}),b("PageTransitions").transitionComplete()}function p(a){return h===null||a===h}function q(a,c){var d=b("TimelineURI").getVanityFromURI(a);a=a.getQueryData().id;var e=b("TimelineURI").getVanityFromURI(c);c=c.getQueryData().id;if(d&&e)return d!==e;return a&&c?a!==c:!0}function r(a){return b("ProfileTabUtils").isActivityLogTab(a)||a===b("ProfileTabConst").MEMORIAL_CONTACT||a===b("ProfileTabConst").POSTS}function s(){b("PageTransitions").registerHandler(j,g)}var t={init:function(a){i=a.profileContextData,s()},reset:function(){i=null,h=null,b("PageTransitions").removeHandler(j)},getScriptPath:function(a){var c=b("ProfileScriptPath").path;a&&!b("ProfileTabUtils").isTimelineTab(a)&&(c+=":"+a);return c}};e.exports=t}),null);
__d("WwwProfileQuickLogModule",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TIMELINE_TAIL_LOAD_WWW:26476545})}),null);
__d("ProfileTimelineTailLoadLogger",["csx","DOM","ProfileTimelineTailLoadTypedLogger","QuickPerformanceLogger","TailLoadLogger","WwwProfileQuickLogModule","$","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("gkx")("AT5tff2zug-UH5Oawl-rV2AVAexoxRm9yknZmARkBj4QUOspraTAENtjMeQCaFemZhSDp8-zOB7txUUGvWJBUXUv");c=babelHelpers.inherits(a,b("TailLoadLogger"));h=c&&c.prototype;function a(a,b,c){h.constructor.call(this,"timeline",a,b),this.$ProfileTimelineTailLoadLogger2=!1,this.$ProfileTimelineTailLoadLogger1=c}a.prototype.createLogger=function(){var a=new(b("ProfileTimelineTailLoadTypedLogger"))(),c=this.$ProfileTimelineTailLoadLogger1;c&&a.setBufferPx(c.buffer).setPageSize(c.pageSize);return a};a.prototype.getStoryCount=function(){return b("DOM").scry(b("$")("timeline_tab_content"),"._5pat").length};a.prototype.setQPLStartMarker=function(){i&&!this.$ProfileTimelineTailLoadLogger2&&(b("QuickPerformanceLogger").markerStart(b("WwwProfileQuickLogModule").TIMELINE_TAIL_LOAD_WWW),this.$ProfileTimelineTailLoadLogger2=!0)};a.prototype.setQPLEndMarker=function(a){i&&this.$ProfileTimelineTailLoadLogger2&&(b("QuickPerformanceLogger").markerEnd(b("WwwProfileQuickLogModule").TIMELINE_TAIL_LOAD_WWW,a),this.$ProfileTimelineTailLoadLogger2=!1)};a.prototype.setQPLMarkerPoint=function(){i&&this.$ProfileTimelineTailLoadLogger2&&b("QuickPerformanceLogger").markerPoint(b("WwwProfileQuickLogModule").TIMELINE_TAIL_LOAD_WWW,"SHIMMER_HIDDEN")};e.exports=a}),null);
__d("TimelineContextItemLogger",["cx","BanzaiLogger","Event","FBJSON","Parent","Run","tidyEvent"],(function(a,b,c,d,e,f,g){__p&&__p();var h="MTimelineXContextItemsLoggerConfig",i="impression",j="click",k="context_item_url",l="event",m="_md0",n=[];function o(a,c,d){a=a.getAttribute("data-store");if(a){a=b("FBJSON").parse(a);a[l]=c;d&&(a[k]=d);b("BanzaiLogger").log(h,a)}}a={logWhenVisible:function(a){n.length||b("Run").onLeave(function(){n=[]}),n.push(a)},logWhenClicked:function(a){b("tidyEvent")(b("Event").listen(a,"click",function(a){a=a.getTarget();if(a.nodeName!=="A")return;var c=b("Parent").byClass(a,m);c&&o(c,j,a.href)}))},listenToExpand:function(a){b("tidyEvent")(a.addListener("expanded",function(){while(n.length)o(n.pop(),i)}))}};e.exports=a}),null);
__d("TimelineDrag",["ArbiterMixin","Event","Locale","Style","Vector","mixin"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));g=c&&c.prototype;function a(a,b,c){"use strict";g.constructor.call(this),c=c||{},this._listenOn=c.listenOn,this._offsetInput=b,this._defaultOffset=c.default_offset,this._killClicks=c.killClicks,this._vertical=!0,this._RTLXSwitch=!1,this.setPicture(a,c)}a.prototype.setPicture=function(a,c){"use strict";__p&&__p();if(!a)return!1;c=c||{};this._picture=a;this._defaultOffset=c.default_offset;c.offsetInput&&(this._offsetInput=c.offsetInput);c.vertical!==undefined&&(this._vertical=c.vertical);c.height&&(this._containerHeight=c.height);c.width&&(this._containerWidth=c.width);this._vertical?(this._offsetType="top",this._eventCoord="y"):(this._RTLXSwitch=b("Locale").isRTL(),this._offsetType="left",this._eventCoord="x");this._picture.complete?this._initialLoad():this._loadListener=b("Event").listen(this._picture,"load",function(){this._loadListener.remove(),this._loadListener=null,this._initialLoad()}.bind(this))};a.prototype.destroy=function(){"use strict";this._stopDrag(),this._saveOffset(),this._mousedown&&this._mousedown.remove(),this._mousedown=null,this._touch&&this._touch.remove(),this._touch=null,this._onclick&&this._onclick.remove(),this._onclick=null,this._loadListener&&this._loadListener.remove(),this._loadListener=null};a.prototype._initialLoad=function(){"use strict";__p&&__p();var a=this._listenOn?this._listenOn:this._picture;this._mousedown&&this._mousedown.remove();this._mousedown=b("Event").listen(a,"mousedown",this._onMouseDown.bind(this));this._touch&&this._touch.remove();this._touch=b("Event").listen(a,"touchstart",this._onTouchStart.bind(this));this._vertical?this._maxOffset=this._containerHeight-this._picture.offsetHeight:this._maxOffset=this._containerWidth-this._picture.offsetWidth;this._defaultOffset!==undefined&&this._setOffset(this._defaultOffset);this._onclick&&this._onclick.remove();this._onclick=null;this._killClicks&&(this._onclick=b("Event").listen(a,"click",this._onClick.bind(this)));this._saveOffset()};a.prototype._onClick=function(event){"use strict";event.kill()};a.prototype._onDragStart=function(a){"use strict";var c=parseInt(b("Style").get(this._picture,this._offsetType),10)||0;this._pictureStartDragOffset=c-a[this._eventCoord];this._startDrag();event.kill()};a.prototype._onMouseDown=function(event){"use strict";this._onDragStart(b("Vector").getEventPosition(event))};a.prototype._onTouchStart=function(event){"use strict";this._onDragStart(b("Vector").getTouchEventPosition(event))};a.prototype._startDrag=function(){"use strict";this._dragStarted||(this.inform("startdrag",this),this._dragTokens=[b("Event").listen(document.documentElement,"mouseup",this._onDragEnd.bind(this)),b("Event").listen(document.documentElement,"touchend",this._onDragEnd.bind(this)),b("Event").listen(document.documentElement,"mousemove",this._onMouseMove.bind(this)),b("Event").listen(document.documentElement,"touchmove",this._onTouchMove.bind(this))],this._dragStarted=!0)};a.prototype._saveOffset=function(){"use strict";var a=parseInt(b("Style").get(this._picture,this._offsetType),10);this._RTLXSwitch?this._offsetInput.value=a+this._containerWidth-this._picture.offsetWidth:this._offsetInput.value=a};a.prototype._stopDrag=function(){"use strict";this._dragStarted&&(this.inform("stopdrag",this),this._dragStarted=!1,this._dragTokens.forEach(function(a){a.remove()}),this._saveOffset())};a.prototype._onDragEnd=function(event){"use strict";this._stopDrag(),event.kill()};a.prototype._setOffset=function(a){"use strict";this._RTLXSwitch?a=Math.max(0,Math.min(a,-this._maxOffset)):a=Math.min(0,Math.max(a,this._maxOffset)),b("Style").set(this._picture,this._offsetType,a+"px")};a.prototype._onHandleMove=function(a){"use strict";this._setOffset(this._pictureStartDragOffset+a[this._eventCoord]),event.kill()};a.prototype._onMouseMove=function(event){"use strict";this._onHandleMove(b("Vector").getEventPosition(event))};a.prototype._onTouchMove=function(event){"use strict";this._onHandleMove(b("Vector").getTouchEventPosition(event))};e.exports=a}),null);
__d("TimelineCover",["csx","cx","fbt","Arbiter","Button","CSS","Dialog","DOM","DOMScroll","FileInputUploader","Focus","HTML","PageTransitions","Parent","ReloadPage","Run","Style","TimelineDrag","ge","setImmediate","tidyEvent"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();function j(a,c,d){"use strict";this.root=b("Parent").bySelector(a,"#fbProfileCover"),typeof c==="object"?(this._coverHeight=c.cover_height,this._coverWidth=c.cover_width,this.previewing=c.previewing,this._isLegacy=!1):(this._isLegacy=!0,this._coverHeight=c,this.previewing=d),this._parentSection=b("Parent").byClass(this.root,"fbTimelineSection"),this.cover=b("DOM").find(this.root,".cover"),j.instance=this,this.editing=!1,b("Run").onBeforeUnload(this.onBeforeUnload.bind(this)),this._parentSection||(this._parentSection=b("Parent").byClass(this.root,"fbEventHeader")),this.previewing&&b("setImmediate")(function(){this.editMode(),this.updateCoverImage(this.previewing)}.bind(this))}j.prototype.showLoadingIndicator=function(){"use strict";var a=b("ge")("fbCoverImageContainer");a&&b("CSS").addClass(a,"opaquedLoading")};j.prototype.hideLoadingIndicator=function(){"use strict";var a=b("ge")("fbCoverImageContainer");a&&b("CSS").removeClass(a,"opaquedLoading")};j.prototype.onBeforeUnload=function(){"use strict";if(this.isInEditMode())return i._("If you leave this page, your cover photo will not be saved. To save, press the \"save\" button below your cover photo.")};j.prototype.isCoverImageVerticalFlow=function(a){"use strict";return a===null||a===undefined?!0:!a.style.height};j.prototype.editMode=function(){"use strict";__p&&__p();var a=b("DOM").find(this.root,"button.saveButton");b("Button").setEnabled(b("DOM").find(this.root,"button.cancelButton"),!0);b("Button").setEnabled(a,!0);this.hideLoadingIndicator();this._coverImage=b("DOM").scry(this.root,".coverImage")[0];if(this._coverImage){var c=b("DOM").scry(this._coverImage,".coverWrap")[0];if(c){c=b("DOM").scry(c,".coverPhotoImg")[0];this._originalIsVertical=this.isCoverImageVerticalFlow(c);this._originalOffset=b("Style").get(c,this._originalIsVertical?"top":"left")}}this._parentSection!==null&&b("CSS").addClass(this._parentSection,"fbEditCover");b("DOMScroll").scrollTo(this.root);this.previewing&&(b("DOM").remove(this._coverImage),b("CSS").show(this._coverImage));if(this._coverImage){c=b("DOM").scry(this._coverImage,".coverPhotoImg")[0];c&&this._createDragger()}this.editing=!0;b("Focus").set(a);b("Arbiter").inform("CoverPhotoEdit",{sender:this,state:"open"})};j.prototype._exitEditMode=function(){"use strict";this._timelineDrag&&(this._timelineDrag.destroy(),this._timelineDrag=null),b("DOM").find(this.root,"input.hiddenPhotoID").value=null,b("Button").setEnabled(b("DOM").find(this.root,"button.cancelButton"),!1),b("Button").setEnabled(b("DOM").find(this.root,"button.saveButton"),!1),this._parentSection!==null&&b("CSS").removeClass(this._parentSection,"fbEditCover"),this.hideLoadingIndicator(),this.previewing=!1,b("Arbiter").inform("CoverPhotoEdit",{sender:this,state:"closed"}),this.editing=!1};j.prototype._createDragger=function(a){"use strict";var c,d;this._isLegacy?(c=b("DOM").find(this.root,"input.photoOffsetInput"),this._originalIsVertical=!0):(d=a===undefined?this._originalIsVertical:a,c=d?b("DOM").find(this.root,"input.photoOffsetYInput"):b("DOM").find(this.root,"input.photoOffsetXInput"));this._timelineDrag=new(b("TimelineDrag"))(b("DOM").scry(this.root,".coverImage .coverPhotoImg")[0],c,{height:this._coverHeight,width:this._coverWidth,listenOn:this.cover,vertical:d,killClicks:!0})};j.prototype.updateCoverImage=function(a,c){"use strict";__p&&__p();this._reloadAfterNextUpdate=!0;c&&this.editMode();b("DOM").find(this.root,"input.hiddenPhotoID").value=a;b("Button").setEnabled(b("DOM").find(this.root,"button.saveButton"),!0);c&&b("DOM").replace(b("DOM").scry(this.root,".coverImage")[0],typeof c==="string"?b("HTML")(c):c);a=b("DOM").scry(b("DOM").find(this.root,".coverImage"),".coverPhotoImg")[0];c=this.isCoverImageVerticalFlow(a);var d;this._isLegacy?d=b("DOM").find(this.root,"input.photoOffsetInput"):d=c?b("DOM").find(this.root,"input.photoOffsetYInput"):b("DOM").find(this.root,"input.photoOffsetXInput");this._timelineDrag?this._timelineDrag.setPicture(a,{offsetInput:d,vertical:c}):this._createDragger(c);this._updateHeader()};j.prototype.saveUpdate=function(){"use strict";window.onbeforeunload=null;var a=b("ge")("fbCoverImageContainer");b("CSS").addClass(a,"opaquedLoading");this._timelineDrag&&(this._timelineDrag.destroy(),this._timelineDrag=null)};j.prototype.cancelUpdate=function(){"use strict";this._reloadAfterNextUpdate=!1,b("DOM").remove(b("DOM").scry(this.root,".coverImage")[0]),b("DOM").prependContent(this.cover,this._coverImage),this._originalOffset!==undefined&&b("Style").set(b("DOM").scry(this._coverImage,".coverPhotoImg")[0],this._originalIsVertical?"top":"left",this._originalOffset),this._exitEditMode(),this._updateHeader()};j.staticSaveComplete=function(){"use strict";var a=j.getInstance();a!==null&&a.saveComplete()};j.prototype.saveComplete=function(){"use strict";this._reloadAfterNextUpdate&&b("ReloadPage").now();this._coverImage=b("DOM").scry(this.root,".coverImage")[0];var a=b("DOM").scry(this.root,"._3x7_")[0];a&&b("CSS").removeClass(a,"_3x7_");this._exitEditMode();this._updateHeader();b("PageTransitions").rewriteCurrentURI(b("PageTransitions").getCurrentURI().getUnqualifiedURI(),b("PageTransitions").getCurrentURI().removeQueryData("preview_cover"))};j.prototype.isInEditMode=function(){"use strict";return this.editing};j.prototype._updateHeader=function(){"use strict";var a=b("DOM").scry(this.root,".coverImage")[0];if(!a)return;a=b("CSS").hasClass(a,"coverNoImage");var c=null;this._parentSection!==null&&(c=b("CSS").hasClass(this._parentSection,"noCoverImage"));a!==c&&(this._parentSection!==null&&b("CSS").conditionClass(this._parentSection,"noCoverImage",a))};j.getInstance=function(){"use strict";return j.instance};j.staticUpdateCoverImage=function(a){"use strict";var b=j.getInstance();b!==null&&b.updateCoverImage(null,a)};j.prototype.setupFileUpload=function(a,c,d){"use strict";__p&&__p();a.subscribe("change",function(){__p&&__p();var e=new(b("FileInputUploader"))(a.getInput()).setURI(c).setAllowCrossOrigin(!0);e.subscribe("failure",function(){j.showErrorDialog(i._("Cover Upload Failed"),i._("Uploading the new cover picture failed. Please try again."))});e.subscribe(["success","failure"],function(){this.hideLoadingIndicator(),a.clear(),b("CSS").removeClass(a.getControl(),d),a.getInput().disabled=!1}.bind(this));this.showLoadingIndicator();this._reloadAfterNextUpdate=!0;e.send();b("CSS").addClass(a.getControl(),d);a.getInput().disabled=!0}.bind(this))};j.setupFileUpload=function(a,b,c){"use strict";var d=j.getInstance();d!==null&&d.setupFileUpload(a,b,c)};j.imageUploadDone=function(a,b){"use strict";var c=j.getInstance();c!==null&&c.updateCoverImage(a,b)};j.showErrorDialog=function(a,c){"use strict";new(b("Dialog"))().setTitle(a).setButtons(b("Dialog").OK).setBody(c).setSemiModal(!0).show();a=j.getInstance();a!==null&&a.hideLoadingIndicator()};j.initFileUploadMenu=function(a){"use strict";j.showLoadingAfterFileUpload(a.getForm())};j.showLoadingAfterFileUpload=function(a){"use strict";b("tidyEvent")(a.subscribe("submit",function(){var a=j.getInstance();a!==null&&a.showLoadingIndicator()}))};j.instance=null;e.exports=j}),null);
__d("TimelineNavLight",["csx","cx","invariant","Arbiter","CSS","DataStore","DOM","DOMQuery","Event","Parent","ProfileEngagementTypedLogger","ProfileOverviewDOMID","ProfileOverviewSection","ProfileTabUtils","ProfileTimelineUILogger","TimelineAppSectionConstants","destroyOnUnload","queryThenMutateDOM","requireWeak"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j="_6-7",k="_6-6",l="_529n",m="_5215",n="_9rw",o="_70k",p="._6-7",q="._6-6";function r(a){"use strict";__p&&__p();r.$5&&i(0,undefined);this.$1=a;this.$2=b("DOMQuery").scry(a,p)[0];this.$3=b("DOMQuery").scry(a,q);this.$6();b("ProfileOverviewSection").subscribe("Medley/transitionToSection",function(a,c){this.$7(c.slice(b("ProfileOverviewDOMID").PREFIX_MEDLEY.length))}.bind(this));var c=b("Arbiter").subscribe("TimelineController/sectionKeyChange",function(event,a){return this.$7(a[0])}.bind(this)),d=b("Event").listen(this.$1,"click",this.$8.bind(this));r.$5=this;b("destroyOnUnload")(function(){this.$1=null,this.$2=null,this.$3=null,d.remove(),c.unsubscribe(),this.$4&&this.$4.remove(),r.$5=null}.bind(this))}r.prototype.setMoreMenuInstance=function(a){"use strict";this.$4=b("Event").listen(a.getRoot(),"click",this.$9.bind(this))};r.setMoreMenuInstance=function(a){"use strict";!r.$5&&i(0,undefined),r.$5.setMoreMenuInstance(a)};r.prototype.$7=function(a){"use strict";__p&&__p();this.$2&&b("CSS").removeClass(this.$2,j);var c=this.$3;c&&c.some(function(c){var d=b("TimelineAppSectionConstants").collectionTabKeyToAppTabKey[a]||a,e=b("TimelineAppSectionConstants").alternateCollectionTabKeyToAppTabKey[a];if(b("DataStore").get(c,"tab-key")===d||b("DataStore").get(c,"tab-key")===e){b("CSS").addClass(c,j);this.$2=c;return!0}return!1}.bind(this));(b("ProfileTabUtils").isTimelineTab(a)||b("ProfileTabUtils").isTimelineOverviewTab(a))&&b("requireWeak")("ScrollColumn.react",function(a){b("Arbiter").inform(a.EVENT_SHOULD_ADJUST)})};r.prototype.$6=function(){"use strict";__p&&__p();var a=this.$3,c,d;a&&(c=a.length-1,d=a[c]);var e,f,g,h=0;b("queryThenMutateDOM")(function(){__p&&__p();var i=this.$1;if(i){i=b("Parent").byClass(i,o);i instanceof HTMLElement&&(e=i.offsetWidth)}f=d.offsetLeft;g=d.offsetWidth;for(var i=c;i>1;i--)if(a){var j=a[i];if(j.offsetLeft+j.offsetWidth>e)h++;else break}}.bind(this),function(){var d=this.$1;f+g>e&&d&&b("CSS").addClass(d,m);if(a)for(var i=c;i>c-h;i--)b("DOM").remove(a[i]);if(d){i=b("Parent").byClass(d,l);i!==null&&b("CSS").removeClass(i,l)}}.bind(this))};r.prototype.$10=function(a,c){"use strict";a=b("Parent").byClass(a,c);return a?b("DataStore").get(a,"tab-key"):null};r.prototype.$8=function(event){"use strict";var a=this.$10(event.target,k);a&&b("ProfileTimelineUILogger").logCoverNavItemClick(a)};r.prototype.$9=function(event){"use strict";var a=this.$10(event.target,n);a&&b("ProfileTimelineUILogger").logCoverNavMoreItemClick(a)};r.setupProfileOverviewLogging=function(a){"use strict";var c=a.dropdownMenu,d=a.profileID,e=a.profileSessionID,f=a.surface;c.onTriggerClick(function(a){new(b("ProfileEngagementTypedLogger"))().setEngagementType("timeline_navigation_click").setItemType("dropdown_button").setProductBucket("profile_core").setProfileIDDummy(d).setProfileSessionID(e).setSurface(f).log()});c.onMenuItemClick(function(a){new(b("ProfileEngagementTypedLogger"))().setEngagementType("timeline_navigation_click").setItemType("dropdown_menu_item").setItemSubtype(a.getValue()).setProductBucket("profile_core").setProfileIDDummy(d).setProfileSessionID(e).setSurface(f).log()})};e.exports=r}),null);
__d("TimelineScrubberKey",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MONTH:"month",RECENT_ACTIVITY:"recent",YEAR:"year"})}),null);
__d("TimelineSection",["Arbiter","CSS","DOM","Parent","ScrollingPager","TimelineConstants","TimelineLegacySections","TimelineScrubberKey","UIPagelet"],(function(a,b,c,d,e,f){__p&&__p();function a(a,c,d,e,f){"use strict";this.$1=a,this.$2=e,this.$3=c,this.$4=null,this.$5=null,this.$6=!0,this.$7=!0,this.$8=c!==b("TimelineScrubberKey").RECENT_ACTIVITY,this.$9=f,this.$10=d,this.$11={},this.$12=!1,this.$13=[],this.$14=!1}a.prototype.load=function(a,c){"use strict";__p&&__p();if(this.$2){this.activateContentScrollLoad();return}var d=this.$10;b("Arbiter").inform(b("TimelineConstants").SECTION_LOADING,{data:d,scrubberKey:this.$3});this.$2=!0;b("CSS").removeClass(this.$1,"fbTimelineTimePeriodUnexpanded");b("CSS").removeClass(this.$1,"fbTimelineTimePeriodSuppressed");var e=b("TimelineLegacySections").shouldForceNoFriendActivity();d=babelHelpers["extends"]({},d,{highlight_unit_data:a,parent_key:this.$4,force_no_friend_activity:e});b("CSS").addClass(this.$1,"fbTimelineSectionLoading");this.$6=!1;this.activateContentScrollLoad();c&&(this.$1.style.minHeight=window.innerHeight+"px",b("Arbiter").subscribeOnce(b("TimelineConstants").SECTION_FULLY_LOADED,function(c,a){a.scrubberKey===this.$3&&(this.$1.style.minHeight="",b("TimelineLegacySections").destroyOnVisible(this.$3))}.bind(this)));b("TimelineLegacySections").addLoadPagelet(this.$3,b("UIPagelet").loadFromEndpoint("ProfileTimelineSectionPagelet",this.$1.id,d,{usePipe:!0,jsNonblock:!0,constHeight:!0,append:!1}));b("TimelineLegacySections").collapsePlaceHolderHeaders()};a.prototype.preload=function(){"use strict";b("CSS").addClass(this.$1,"fbTimelineTimePeriodSuppressed");b("CSS").removeClass(this.$1,"fbTimelineTimePeriodUnexpanded");var a=b("DOM").find(this.$1,"span.sectionLabel");a.getAttribute("data-original-label")&&(b("DOM").setContent(a,a.getAttribute("data-original-label")),a.removeAttribute("data-original-label"))};a.prototype.unload=function(){"use strict";if(!this.$2||!this.$8)return;this.$2=!1;b("TimelineLegacySections").cancelLoadPagelet(this.$3);b("CSS").addClass(this.$1,"fbTimelineTimePeriodUnexpanded");b("CSS").removeClass(this.$1,"fbTimelineTimePeriodSuppressed");this.$1.nextSibling instanceof Element&&b("CSS").hasClass(this.$1.nextSibling,"fbTimelineSection")?(b("DOM").setContent(this.$1,this.$1.nextSibling),this.$1.firstChild instanceof Element&&b("CSS").show(this.$1.firstChild)):b("DOM").empty(this.$1);this.deactivateScrollLoad()};a.prototype.canScrollLoad=function(){"use strict";return this.$6};a.prototype.activateScrollLoad=function(){"use strict";this.$6=!0;b("CSS").removeClass(this.$1,"fbTimelineTimePeriodSuppressed");b("CSS").addClass(this.$1,"fbTimelineTimePeriodUnexpanded");var a=b("TimelineLegacySections").getOnVisible(this.$3);a&&a.reset();return this};a.prototype.deactivateScrollLoad=function(){"use strict";__p&&__p();if(!this.$2){this.$6=!1;b("CSS").removeClass(this.$1,"fbTimelineTimePeriodUnexpanded");b("CSS").addClass(this.$1,"fbTimelineTimePeriodSuppressed");var a=b("TimelineLegacySections").getOnVisible(this.$3);a&&a.remove()}b("DOM").scry(this.$1,".fbTimelineSectionExpandPager").forEach(function(a){var c=b("ScrollingPager").getInstance(a.id);c&&c.removeOnVisible();c=b("Parent").byClass(a,"stat_elem");c&&b("CSS").removeClass(c,"async_saving")});return this};a.prototype.canContentScrollLoad=function(){"use strict";return this.$7};a.prototype.activateContentScrollLoad=function(){"use strict";this.$7=!0;return this};a.prototype.deactivateContentScrollLoad=function(){"use strict";this.$7=!1;return this};a.prototype.getNode=function(){"use strict";return this.$1};a.prototype.getScrubberKey=function(){"use strict";return this.$3};a.prototype.getParentKey=function(){"use strict";return this.$4};a.prototype.setParentKey=function(a){"use strict";this.$4=a;return this};a.prototype.addSubSection=function(a,b){"use strict";Array.isArray(this.$5)||(this.$5=[]);Array.isArray(this.$5)&&(this.$5[a]=b);return this};a.prototype.getSubSections=function(){"use strict";return this.$5};a.prototype.isLoaded=function(){"use strict";return this.$2};a.prototype.isRightColumnFinished=function(){"use strict";return this.$12};a.prototype.setRightColumnFinished=function(){"use strict";this.$12=!0;return this};a.prototype.getHistoricUnitCount=function(){"use strict";return this.$9};a.prototype.expand=function(a){"use strict";__p&&__p();if(!this.$2)return this;var c=b("DOM").find(this.$1,".fbTimelineSectionExpander");b("CSS").addClass(c.firstChild,"async_saving");a&&b("CSS").addClass(a,"async_saving");b("Arbiter").inform(b("TimelineConstants").SECTION_EXPAND,this.$3);b("DOM").scry(this.$1,".fbTimelineCapsule").forEach(b("DOM").remove);this.$11.new_expand=!0;b("TimelineLegacySections").cancelLoadPagelet(this.$3);b("TimelineLegacySections").addLoadPagelet(this.$3,b("UIPagelet").loadFromEndpoint("ProfileTimelineSectionPagelet",c.id,this.$11,{usePipe:!0,jsNonblock:!0,constHeight:!0}));return this};a.prototype.isPermalinkPeriod=function(){"use strict";return!!this.$10.is_permalink_period};a.prototype.isHidden=function(){"use strict";return this.$14};a.prototype.hide=function(){"use strict";this.$14=!0;b("CSS").hide(b("DOM").find(this.$1,".fbTimelineSection"));return this};a.prototype.isHiddenFromView=function(){"use strict";return!this.$2||this.$14||b("CSS").hasClass(this.$1,"fbTimelineTimePeriodUnexpanded")};a.prototype.hasPendingCallbacks=function(){"use strict";return this.$13.length>0};a.prototype.queueDisplayCallback=function(a,b){"use strict";this.$13[a]=b;return this};a.prototype.runPendingDisplayCallbacks=function(){"use strict";while(this.hasPendingCallbacks()){var a=this.$13.shift();a&&a()}return this};e.exports=a}),null);
__d("TimelineSmartInsert",["Run","UserAgent_DEPRECATED","Vector"],(function(a,b,c,d,e,f){__p&&__p();var g=100;function h(a){return a==="viewport"?b("Vector").getViewportDimensions().y:a}var i=!1,j=!1;function k(){if(j)return;b("Run").onLeave(l);j=!0}function l(){i=!1,j=!1}a={run:function(a,c,d){__p&&__p();k();if(!i||b("UserAgent_DEPRECATED").ie()<=8){c();return}var e=a.offsetHeight;c();c=a.offsetHeight;var f=b("Vector").getScrollPosition().y;a=b("Vector").getElementPosition(a).y;c!==e&&a<f&&a+e<f+h(d||g)&&window.scrollBy(0,c-e)},enable:function(){i=!0}};e.exports=a}),null);
__d("TimelineContentLoader",["csx","Arbiter","CSS","DOM","DOMScroll","Event","OnVisible","Parent","ProfileTimelineTailLoadLogger","Random","TimelineComponentKeys","TimelineConstants","TimelineController","TimelineDOMID","TimelineLegacySections","TimelineScrubberKey","TimelineSection","TimelineSmartInsert","Vector","$","debounce","findTag","ge","queryThenMutateDOM"],(function(a,b,c,d,e,f,g){__p&&__p();var h=!1,i=null,j={},k={},l={},m=[],n={},o=null,p=null,q=80,r=250;a=500;function s(){if(h)return;b("TimelineController").register(b("TimelineComponentKeys").CONTENT,y);p=b("Arbiter").subscribe(b("TimelineConstants").SECTION_EXPAND,function(a,b){y.navigateToSection(b)});h=!0}var t=b("debounce")(function(a,c,d){__p&&__p();var e=b("TimelineLegacySections").get(a),f=-1;if(e){e=e.getHistoricUnitCount();e!==null&&e!==undefined&&(f=e)}e=c-f;c=d-1;if(f===-1||c<=0||e<0)return;d=y.getNextSectionKey(a);if(d){f=b("TimelineLegacySections").get(d);f&&f.load();t(d,e,c)}},a);function u(a,b){b===void 0&&(b=0),b<q&&!a()&&setTimeout(u.bind(null,a,b+1),r)}function v(a){u(function(){if(a===b("TimelineScrubberKey").WAY_BACK)return!0;var c=y.getNextSectionKey(a);if(c){x(c);return!0}return!1})}function w(a,c,d){u(function(){if(c===b("TimelineScrubberKey").WAY_BACK)return!0;var e=y.getNextSectionKey(c);if(e){b("TimelineLegacySections").addOnVisible(e,new(b("OnVisible"))(a,x.bind(null,e),!1,d||1e3));return!0}return!1})}function x(a){var c=b("TimelineLegacySections").get(a);c&&c.canScrollLoad()&&(c.load(),o&&t(a,o.required_units,o.max_parallelism))}var y={CURRENT_SECTION_OFFSET:150,registerTimePeriod:function(a,c,d,e,f,g,h){__p&&__p();s();if(m.includes(c))return;l&&Object.assign(d||{},l);a=new(b("TimelineSection"))(a,c,d,e,h);if(!f)b("TimelineLegacySections").setMainSectionOrder(c,g),j[c]=!0;else{a.setParentKey(f);d=b("TimelineLegacySections").get(f);d&&d.addSubSection(g,a)}b("TimelineLegacySections").set(c,a);y.checkCurrentSectionChange();b("Arbiter").inform(b("TimelineConstants").SECTION_REGISTERED,{scrubberKey:c,section:a})},reset:function(){__p&&__p();b("TimelineLegacySections").removeAllOnVisibles();b("TimelineLegacySections").cancelLoadPagelets();for(var a in n)n[a].unsubscribe(),delete n[a];for(var c in k){var d=k[c];for(var e in d)d[e]&&d[e].destroy()}p&&p.unsubscribe();p=null;b("TimelineLegacySections").removeAll();i=null;j={};l={};m=[];h=!1},checkCurrentSectionChange:function(){__p&&__p();var a=null;b("queryThenMutateDOM")(function(){a=y.getCurrentSection()},function(){var c=i&&i.getScrubberKey();if(a&&a.getScrubberKey()!==c&&!a.isPermalinkPeriod()){i=a;c=a.getScrubberKey();var d=a.getParentKey();d||(d=c,c=null);b("TimelineController").sectionHasChanged(d,c)}})},setParallelLoadConfig:function(a){o=a},getCurrentSection:function(){__p&&__p();var a={},c=b("TimelineLegacySections").getAll();for(var d in c){var e=c[d];if(!e||e.isHiddenFromView&&e.isHiddenFromView())continue;var f=b("Vector").getElementPosition(e.getNode(),"viewport").y;e.getScrubberKey()===b("TimelineScrubberKey").RECENT_ACTIVITY&&f--;f<y.CURRENT_SECTION_OFFSET&&(a[f]=e)}f=Math.max.apply(null,Object.keys(a).map(Number));e=b("TimelineLegacySections").getMainSectionOrder();c=f===-Infinity;if(!c)return a[f];else if(e[0])return b("TimelineLegacySections").get(e[0]);return null},getLastVisibleSection:function(){__p&&__p();var a=b("TimelineLegacySections").getMainSectionOrder();for(var c=a.length-1;c>=0;c--){var d=a[c];if(!d)continue;d=b("TimelineLegacySections").get(d);if(d&&!d.isHiddenFromView())return d}return null},getRecentActivitySection:function(){return b("TimelineLegacySections").get(b("TimelineScrubberKey").RECENT_ACTIVITY)},capsuleForCurrentSection:function(){var a=y.getCurrentSection();return a&&b("DOM").scry(a.getNode(),".fbTimelineCapsule")[0]},enableScrollLoad:function(a,c,d,e){a=b("findTag")(a);var f=b("Parent").byClass(a,"fbTimelineSection")||a.parentNode;f=f&&b("DOM").scry(f,".fbTimelineCapsule")[0];if(!f)return;d===null?w(a,c,e):b("TimelineController").runOnceWhenSectionFullyLoaded(w.bind(null,a,c,e),c,d)},getNextSectionKey:function(a){__p&&__p();var c=b("TimelineLegacySections").getMainSectionOrder();for(var d=0;d<c.length-1;d++)if(c[d]===a){while(d<c.length-1&&!c[d+1])d++;return c[d+1]}d=b("TimelineLegacySections").get(a);if(!d)return null;c=d.getParentKey();if(!c)return null;var e=b("TimelineLegacySections").get(c);e=e&&e.getSubSections();if(!e)return null;var f=e[e.length-1];if(d.getScrubberKey()===f.getScrubberKey())return y.getNextSectionKey(c);for(var d=0;d<e.length-1;d++)if(e[d].getScrubberKey()===a)return e[d+1].getScrubberKey();return null},hideSection:function(a){__p&&__p();var c=b("TimelineLegacySections").get(a);c&&c.hide();var d=b("TimelineController").getCurrentScrubber();if(d){var e=null;!j[a]&&c?e=d.getSubnav(c.getParentKey(),a):e=d.getNav(a);e&&b("CSS").hide(e)}c=b("TimelineController").getCurrentStickyHeaderNav();c&&c.removeTimePeriod(a)},loadSectionOnClick:function(a,c){b("Event").listen(a,"click",function(a){a.prevent();a=b("TimelineLegacySections").get(c);a&&a.load()})},removeSection:function(a){b("TimelineLegacySections").removeOnVisible(a);b("TimelineLegacySections").remove(a);delete j[a];var c=b("TimelineController").getCurrentStickyHeaderNav();c&&c.removeTimePeriod(a);m.push(a)},navigateToSection:function(a,c){__p&&__p();c===void 0&&(c=!1);var d=a,e=b("TimelineLegacySections").get(a);if(!e)return;e.isLoaded()||(b("TimelineSmartInsert").enable(),b("DOM").scry(b("$")(b("TimelineDOMID").TAB_CONTENT),".fbTimelineShowOlderSections").forEach(b("DOM").remove));if(!j[a]){e.isLoaded()||(e.getNode().style.minHeight=b("Vector").getViewportDimensions().y+"px");var f=b("Arbiter").subscribe(b("TimelineConstants").SECTION_FULLY_LOADED,function(b,c){c.scrubberKey===a&&(e.getNode().style.minHeight="",f.unsubscribe())});d=e.getParentKey();var g=d&&b("TimelineLegacySections").get(d);if(g){g=g.getNode();b("CSS").hasClass(g,"fbTimelineSectionExpanded")||(b("DOMScroll").scrollTo(g,0),b("CSS").addClass(g,"fbTimelineSectionExpanded"),b("DOM").scry(g,".fbTimelineCapsule").forEach(b("DOM").remove),b("DOM").scry(g,"div.fbTimelineSectionExpandPager").forEach(b("DOM").remove),b("DOM").scry(g,"div.fbTimelineContentHeader").forEach(b("DOM").remove),b("DOM").scry(g,"._5vf").forEach(function(a){a.getAttribute("data-subsection")||b("DOM").remove(a)}))}g=d&&y.getNextSectionKey(d);g=g&&b("TimelineLegacySections").getOnVisible(g);g&&g.setBuffer(0)}g=b("TimelineLegacySections").getMainSectionOrder();for(var h=0;h<g.length;h++){var i=g[h];if(!i)continue;if(i===d)break;i=b("TimelineLegacySections").get(i);i&&i.deactivateScrollLoad().deactivateContentScrollLoad()}e.load(null,!0);b("TimelineLegacySections").collapsePlaceHolderHeaders();var k=b("Vector").getScrollPosition().x;i=b("Vector").getElementPosition(e.getNode()).y;c||b("DOMScroll").scrollTo(new(b("Vector"))(k,i-b("TimelineConstants").SCROLL_TO_OFFSET,"document"),!0,!1,0,0,function(){var c=b("Vector").getElementPosition(e.getNode()).y;b("DOMScroll").scrollTo(new(b("Vector"))(k,c-b("TimelineConstants").SCROLL_TO_OFFSET,"document"),!1);if(a!==b("TimelineScrubberKey").RECENT_ACTIVITY){c=b("DOM").scry(e.getNode(),"h3.uiHeaderTitle")[0];c&&(c.tabIndex=0,c.focus())}})},removeLoadingClass:function(a){var c=a.sectionID,d=a.scrubberKey;a=a.page;b("TimelineController").runOnceWhenSectionFullyLoaded(function(){b("ge")(c)&&b("CSS").removeClass(b("$")(c).parentNode,"fbTimelineSectionLoading")},d,a)},suppressSectionsAbove:function(a){__p&&__p();var c,d=b("TimelineLegacySections").getMainSectionOrder();for(var e=0;e<d.length;e++){var f=d[e];if(!f)continue;var g=b("TimelineLegacySections").get(f);if(!g)continue;c=null;var h=g.getNode().parentElement,i=a.parentElement;if(i&&h&&Array.from(i.children).indexOf(a)<=Array.from(h.children).indexOf(g.getNode())){c=f;break}g.deactivateScrollLoad()}c&&y.navigateToSection(c,!0)},removeDupes:function(a){__p&&__p();a=b("ge")(a);if(!a)return;a=b("DOM").scry(a,"li.fbTimelineUnit");var c={};for(var d=0;d<a.length;d++){var e=a[d];if(e.id&&e.id.startsWith("tl_unit_")){var f=e.id.substring(8,e.id.length),g=b("DOM").scry(e,"div.timelineUnitContainer");g.length>0&&(f+=g[0].getAttribute("data-time"));Object.prototype.hasOwnProperty.call(c,f)?(e.id="dupe_unit_"+b("Random").random(),e.className="hidden_elem"):c[f]=1}}},initPager:function(a){__p&&__p();var c=a.pager,d=a.scrubberKey,e=a.page,f=a.logTailLoad;a=a.tailLoadData;var g=null,h=c.getElement();f&&h&&(g=new(b("ProfileTimelineTailLoadLogger"))(0,h,a),y._setTailLoadLogger(d,e+1,g));var i=c.getHandler();c.setHandler(function(d){var a=c.getElement();a&&a.parentElement&&b("CSS").addClass(a.parentElement,"async_saving");g&&g.tailLoadStarted();i(d)});c.setOption("errorHandler",function(){g&&(g.tailLoadFailed(),g.destroy()),y._setTailLoadLogger(d,e+1,null)});b("TimelineController").runOnceWhenSectionFullyLoaded(function(){var a=c.getElement();a&&a.parentElement&&(b("CSS").removeClass(a.parentElement,"fbTimelineHiddenPager"),c.checkBuffer())},d,e)},tailLoadCompleted:function(a,b,c){var d=y._getTailLoadLogger(b,c);d&&(d.tailLoadSuccessful(a),d.destroy(),y._setTailLoadLogger(b,c,null))},rightColumnFinished:function(a){a=b("TimelineLegacySections").get(a);a&&a.setRightColumnFinished()},loadNextSection:function(a){v(a)},_setTailLoadLogger:function(a,b,c){k[a]||(k[a]={}),k[a][b.toString()]=c},_getTailLoadLogger:function(a,b){return k[a]?k[a][b.toString()]:null}};e.exports=y}),null);
__d("TimelineSeenStateConstants",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FT_TIMELINE_HASH_IDENTIFIER_KEY:"thid"})}),null);
__d("TimelineViewportTracking",["csx","Arbiter","Banzai","DataAttributeUtils","DOM","TimelineSeenStateConstants","TimelineViewportTrackingLogType","ViewportTracking","$","tidyEvent","viewportTrackingBuilder"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i;function j(a,c){__p&&__p();return{_stream:null,_streamDOMID:c,getDataFromConfig:function(a,c){c.isSeenStateLoggingEnabled=a.is_seen_state_logging_enabled,c.isTimetrackingEnabled=a.is_timetracking_enabled,c.vpvdDebug=!!a.vpvd_debug,c.trackingHooks=!!a.tracking_hooks,b("tidyEvent")(b("Arbiter").subscribe(["TimelineConstants/unitSegmentLoaded"],function(){c.invalidateAllStoriesCache(),c.invalidateVisibleStoriesCache()}))},getAllStories:function(){var a=b("DOM").scry(this.getStream(),"._5pat"),c=[];for(var d=0;d<a.length;d++)this.getStoryID(a[d])&&c.push(a[d]);return c},getStream:function(){this._stream||(this._stream=b("$")(this._streamDOMID));return this._stream},getStoryID:function(a){a=JSON.parse(b("DataAttributeUtils").getDataFt(a)||null);if(a){var c=b("TimelineSeenStateConstants").FT_TIMELINE_HASH_IDENTIFIER_KEY;return a[c]}return null},getDataToLog:function(a){a=JSON.parse(b("DataAttributeUtils").getDataFt(a));return{ft:a,log_type:b("TimelineViewportTrackingLogType").IMPRESSION}}}}h=babelHelpers.inherits(k,b("ViewportTracking"));i=h&&h.prototype;k.prototype.getTimetrackingDataToLog=function(a){a=i.getTimetrackingDataToLog.call(this,a);a.log_type=b("TimelineViewportTrackingLogType").DURATION;return a};k.prototype.sendDataToLog=function(a,c,d,e){if(!c.ft)return;a={};e&&(a.retry=e);d&&(a.delay=2e3);b("Banzai").post("timeline_feed_tracking",c,a)};k.prototype.cleanup=function(){l.clearSingleton(),i.cleanup.call(this)};function k(){h.apply(this,arguments)}var l=b("viewportTrackingBuilder")(function(a,b){b=new k(j(a,b));b.init(a);return b});l.init=l.singleton.bind(l);e.exports=l}),null);